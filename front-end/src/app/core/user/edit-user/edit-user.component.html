<h2 mat-dialog-title>Modifier Utilisateur</h2>
<mat-dialog-content class="pb-3" >
    <form [formGroup]="UserForm">
        <div class="d-flex align-items-center m-b-15">
            <img class="mat-card-avatar" [src]='imagePreview' >
            <button mat-raised-button color="primary" class="m-l-15 input-file-button" >
                <input type="file" #filePicker  id="importFile" 
                (change)="onFileChange($event)"  accept="image/*">
            </button>
        </div>
        <div fxLayout="row wrap" class="align-items-center">
            <div fxFlex="100" fxFlex.gt-md="50"> 
                <div class="m-r-15 m-l-15">
                    <mat-form-field>
                        <input type="text" matInput required formControlName="firstName" placeholder="Prénom">
                        <mat-error *ngIf="UserForm.controls['firstName'].hasError('required') && UserForm.controls['firstName'].touched">Le prénom est obligatoire.</mat-error>
                        <mat-error *ngIf="UserForm.controls['firstName'].hasError('minlength') && UserForm.controls['firstName'].touched">Le prénom doit comporter au moins 3 caractères.</mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div fxFlex="100" fxFlex.gt-md="50">
                <div class="m-r-15 m-l-15">
                    <mat-form-field>
                        <input type="text" matInput required formControlName="lastName"  placeholder="Nom">
                        <mat-error *ngIf="UserForm.controls['lastName'].hasError('required') && UserForm.controls['lastName'].touched">Le nom est obligatoire.</mat-error>
                        <mat-error *ngIf="UserForm.controls['lastName'].hasError('minlength') && UserForm.controls['lastName'].touched">Le prénom doit comporter au moins 3 caractères.</mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div fxFlex="100" fxFlex.gt-md="50">
                <div class="m-r-15 m-l-15">
                    <mat-form-field>
                        <input type="email" matInput required formControlName="email" placeholder="Adresse E-mail">
                        <mat-error *ngIf="UserForm.controls['email'].hasError('required') && UserForm.controls['email'].touched">L'adresse e-mail est obligatoire.</mat-error>
                        <mat-error *ngIf="UserForm.controls['email'].hasError('email') && UserForm.controls['email'].touched">Vous devez fournir une adresse e-mail valide.</mat-error>
                    </mat-form-field>
                </div>

            </div>
            <div fxFlex="100" fxFlex.gt-md="50">
                <div class="m-r-15 m-l-15">
                    <mat-form-field>
                        <input type="text" matInput required formControlName="phoneNumber" placeholder="Numéro de Téléphone" (keypress)="numberOnly($event)">
                        <mat-error *ngIf="UserForm.controls['phoneNumber'].hasError('required')  && UserForm.controls['phoneNumber'].touched">Le numéro de téléphone est obligatoire.</mat-error>
                        <mat-error *ngIf="UserForm.controls['phoneNumber'].hasError('pattern') && UserForm.controls['phoneNumber'].touched">Vous devez fournir un numéro de téléphone valide.</mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div fxFlex="100" fxFlex.gt-md="50">
                <div class="m-r-15 m-l-15">
                    <mat-form-field>
                        <mat-label>Departement</mat-label>
                        <mat-select matNativeControl required formControlName="department" >
                            <mat-option *ngFor="let dept of departments"  [value]="dept" matTooltip="{{dept}}">{{dept}}</mat-option>
                        </mat-select>
                        <mat-error *ngIf="UserForm.controls['department'].hasError('required') && UserForm.controls['department'].touched">Le departement est obligatoire.</mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div fxFlex="100" fxFlex.gt-md="50">
                <div class="m-r-15 m-l-15">
                    <mat-form-field>
                        <input type="text" matInput required formControlName="position" placeholder="Fonction">
                        <mat-error *ngIf="UserForm.controls['position'].hasError('required') && UserForm.controls['position'].touched">La fonction est obligatoire.</mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div fxFlex="100" fxFlex.gt-md="50">
                <div class="m-r-15 m-l-15">
                    <mat-form-field>
                        <mat-label>Role</mat-label>
                        <mat-select matNativeControl required formControlName="roleId">
                            <mat-option *ngFor="let role of roles" [value]="role.id">{{role.name}}</mat-option>
                        </mat-select>
                        <mat-error *ngIf="UserForm.controls['roleId'].hasError('required') && UserForm.controls['roleId'].touched">Le role est obligatoire.</mat-error>
                      </mat-form-field>
                </div>
            </div>
        </div>
        <div align="end" fxLayoutGap="10px">
        <button mat-button (click)="submit()" mat-flat-button color="warn" [disabled]="!UserForm.valid">Modifier</button>
        <button class="annuler" mat-button (click)="closeDialog()">Annuler</button>
        </div>
    </form>
</mat-dialog-content>